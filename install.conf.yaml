- defaults:
    link:
      relink: true

- clean: ['~']

- create:
    - ~/code
    - ~/.config/nvim

- link:
    ~/Library/LaunchAgents/everdo_backup.plist: everdo_backup.plist
    ~/.config/nvim/init.vim:                    init.vim
    ~/.gitconfig:                               gitconfig
    ~/.gitignore:                               gitignore
    ~/.tmux.conf:                               tmux.conf
    ~/.zshenv:                                  zshenv

- shell:
    -
      description: Install Homebrew
      command:     (test ! -e /usr/local/bin/brew && /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)") || true
      stdin:       true
      stout:       true
      sterr:       true
    -
      description: Install Brew Packages
      command:     brew bundle
      stderr:      true
    -
      description: Install Corepack (so that Yarn can be installed)
      command:     npm i -g corepack
      stdin:       true
      stout:       true
      sterr:       true
    -
      description: Install Yarn
      command:     corepack prepare yarn@3.1.0 --activate
      stdin:       true
      stout:       true
      sterr:       true
    -
      description: Install TPM
      command:     git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm || true
    -
      description: Install TPM plugins
      command:     ~/.tmux/plugins/tpm/bin/install_plugins
    -
      description: Install vim-plug
      command:     sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
    -
      description: Install oh-my-zsh
      command:     sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" || true
    -
      description: Install Jet Brains fonts
      command:     cp JetBrainsMono/* /Library/Fonts
    -
      description: Start RabbitMQ
      command:     brew services start rabbitmq
    -
      description: Start Redis
      command:     brew services start redis
    -
      description: Install Be Focused Pomodoro Timer
      command:     mas install 961632517
    -
      description: Install the Heroku CLI builds plugin
      command:     heroku plugins:install heroku-builds
    -
      description: Install Everdo backup script
      command:     launchctl unload ~/Library/LaunchAgents/everdo_backup.plist
    -
      description: Install Everdo backup script
      command:     launchctl load ~/Library/LaunchAgents/everdo_backup.plist
